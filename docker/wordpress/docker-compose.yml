services:
  wordpress:
    #build:
    #    context: .
    #    dockerfile: DockerfileWordpress
    env_file:
        - ../api.env
    image: wordpress:latest
    restart: unless-stopped
    ports:
        - 82:80
    environment:
        WORDPRESS_DB_HOST: mysql
        WORDPRESS_DB_NAME: wordpress
        WORDPRESS_DB_USER: root
        WORDPRESS_DB_PASSWORD: test
        # üåê Configuraci√≥n para ngrok
        #WORDPRESS_HOME: "${WP_HOME:-http://localhost:8081}"
        #WORDPRESS_SITEURL: "${WP_SITEURL:-http://localhost:8081}"
        # Configuraciones adicionales
        WORDPRESS_DEBUG: 1
        WORDPRESS_CONFIG_EXTRA: |
            define('WP_DEBUG', true);
            define('WP_DEBUG_LOG', true);
            define('WP_DEBUG_DISPLAY', false);
            define('FS_METHOD', 'direct');
    networks:
        - local-network
    volumes:
        - ../../www/wordpress:/var/www/html
        - ../../config/php.ini:/usr/local/etc/php/conf.d/php.ini


  ngrok-wordpress:
    image: ngrok/ngrok:latest
    container_name: ngrok-wordpress
    restart: always
    depends_on:
        - wordpress
    environment:
        # Set NGROK_AUTHTOKEN in your shell or in a .env file
        #NGROK_AUTHTOKEN: "${NGROK_AUTHTOKEN:-}"
        NGROK_AUTHTOKEN: "36c0VpQR98sSi3LGxjZmDCDmjtE_dJ7rrPFbdP52fegMEpEU"
    command: ["http", "wordpress:80"]
    ports:
        - "4041:4040" # ngrok web UI
    networks:
        - local-network

networks:
    local-network: